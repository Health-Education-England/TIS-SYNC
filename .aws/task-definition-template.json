{
  "containerDefinitions": [
    {
      "name": "tis-sync",
      "image": "430723991443.dkr.ecr.eu-west-2.amazonaws.com/sync:latest",
      "essential": true,
      "secrets": [
        {
          "name": "SPRING_PROFILES_ACTIVE",
          "valueFrom": "spring-profiles-active-sync-${environment}"
        },
        {
          "name": "PROFILE_HOST",
          "valueFrom": "profile-host-sync-${environment}"
        },
        {
          "name": "PROFILE_PORT",
          "valueFrom": "profile-port-sync-${environment}"
        },
        {
          "name": "AUTH_HOST",
          "valueFrom": "auth-host-sync-${environment}"
        },
        {
          "name": "AUTH_PORT",
          "valueFrom": "auth-port-sync-${environment}"
        },
        {
          "name": "DBHOST",
          "valueFrom": "dbhost-tcs-${environment}"
        },
        {
          "name": "DBPORT",
          "valueFrom": "dbport-tcs-${environment}"
        },
        {
          "name": "DBNAME",
          "valueFrom": "dbname-tcs-${environment}"
        },
        {
          "name": "DBUSER",
          "valueFrom": "dbuser-sync-${environment}"
        },
        {
          "name": "DBPASSWORD",
          "valueFrom": "dbpassword-sync-${environment}"
        },
        {
          "name": "USE_SSL",
          "valueFrom": "use-ssl-sync-${environment}"
        },
        {
          "name": "LOG_DIR",
          "valueFrom": "log-dir-sync-${environment}"
        },
        {
          "name": "KC_REALM",
          "valueFrom": "kc-realm-sync-${environment}"
        },
        {
          "name": "KC_CLIENT_ID",
          "valueFrom": "kc-client-id-sync-${environment}"
        },
        {
          "name": "KC_SERVER_URL",
          "valueFrom": "kc-server-url-sync-${environment}"
        },
        {
          "name": "KC_USERNAME",
          "valueFrom": "kc-username-sync-${environment}"
        },
        {
          "name": "KC_PASSWORD",
          "valueFrom": "kc-password-sync-${environment}"
        },
        {
          "name": "KC_TIMEOUT",
          "valueFrom": "kc-timeout-sync-${environment}"
        },
        {
          "name": "ENABLE_ES_SEARCH",
          "valueFrom": "enable-es-search-sync-${environment}"
        },
        {
          "name": "ES_URLS",
          "valueFrom": "es-urls-sync-${environment}"
        },
        {
          "name": "AWS_KINESIS_STREAM_NAME",
          "valueFrom": "ks-stream-name-sync-{environment}"
        },
        {
          "name": "AWS_SQS_QUEUE_URL",
          "valueFrom": "sqs-queue-url-sync-{environment}"
        },
        {
          "name": "SLACK_API_TOKEN",
          "valueFrom": "slack-api-token-sync-{environment}"
        },
        {
          "name": "SLACK_NOTIFICATION_CHANNEL",
          "valueFrom": "slack-notification-channel-sync-{environment}"
        },
        {
          "name": "APPLICATION_CRON_PERSONOWNERREBUILDJOB",
          "valueFrom": "person_owner_rebuild_job_cron-sync-{environment}"
        },
        {
          "name": "APPLICATION_CRON_PERSONPLACEMENTEMPLOYINGBODYTRUSTJOB",
          "valueFrom": "person_placement_employing_body_trust_job_cron-sync-{environment}"
        },
        {
          "name": "APPLICATION_CRON_PERSONPLACEMENTTRAININGBODYTRUSTJOB",
          "valueFrom": "person_placement_training_body_trust_job_cron-sync-{environment}"
        },
        {
          "name": "APPLICATION_CRON_POSTEMPLOYINGBODYTRUSTJOB",
          "valueFrom": "post_employing_body_trust_job_cron-sync-{environment}"
        },
        {
          "name": "APPLICATION_CRON_POSTTRAININGBODYTRUSTJOB",
          "valueFrom": "post_training_body_trust_job_cron-sync-{environment}"
        },
        {
          "name": "APPLICATION_CRON_PERSONELASTICSEARCHJOB",
          "valueFrom": "person_elastic_search_job_cron-sync-{environment}"
        },
        {
          "name": "APPLICATION_CRON_PERSONRECORDSTATUSJOB",
          "valueFrom": "person_record_status_job_cron-sync-{environment}"
        },
        {
          "name": "APPLICATION_CRON_RECORDRESENDINGJOB",
          "valueFrom": "person_elastic_search_job_cron-sync-{environment}"
        },
        {
          "name": "APPLICATION_JOBS_PERSONELASTICSEARCHJOB_PAGESIZE",
          "valueFrom": "person_elastic_search_job_page_size-sync-{environment}"
        },
        {
          "name": "APPLICATION_JOBS_PERSONRECORDSTATUSJOB_DATEOFCHANGEOVERRIDE",
          "valueFrom": "person_record_status_job_data_of_change_override-sync-{environment}"
        },
        {
          "name": "APPLICATION_JOBS_RUNONSTARTUP_EARLIEST",
          "valueFrom": "jobs-run-on-startup-earliest-sync-{environment}"
        },
        {
          "name": "APPLICATION_JOBS_RUNONSTARTUP_LATEST",
          "valueFrom": "jobs-run-on-startup-latest-sync-{environment}"
        }
      ],
      "logConfiguration": {
        "logDriver": "awslogs",
        "options": {
          "awslogs-group": "awslogs-${environment}-tis-sync",
          "awslogs-region": "eu-west-2",
          "awslogs-stream-prefix": "awslogs-tis-sync",
          "awslogs-create-group": "true"
        }
      },
      "portMappings": [
        {
          "containerPort": 8101
        }
      ],
      "environment": [
        {
          "name": "TITLE",
          "value": "tis-sync"
        },
        {
          "name": "AWS_REGION",
          "value": "eu-west-2"
        }
      ]
    }
  ],
  "family": "tis-sync-${environment}",
  "requiresCompatibilities": [
    "FARGATE"
  ],
  "executionRoleArn": "ecsTaskExecutionRole",
  "networkMode": "awsvpc",
  "cpu": "1024",
  "memory": "2048"
}
